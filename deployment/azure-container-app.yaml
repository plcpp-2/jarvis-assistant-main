apiVersion: 2022-11-01-preview
location: eastus
name: jarvis-assistant
resourceGroup: your-resource-group
type: Microsoft.App/containerApps
properties:
  managedEnvironmentId: /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.App/managedEnvironments/{environment-name}
  configuration:
    ingress:
      external: true
      targetPort: 8000
    secrets:
      - name: registry-password
        value: {acr-password}
    registries:
      - server: {acr-name}.azurecr.io
        username: {acr-name}
        passwordSecretRef: registry-password
  template:
    containers:
      - name: jarvis-assistant
        image: {acr-name}.azurecr.io/jarvis-assistant:latest
        env:
          - name: DATABASE_URL
            value: {your-database-connection-string}
          - name: REDIS_URL
            value: {your-redis-connection-string}
          - name: KAFKA_BOOTSTRAP_SERVERS
            value: {your-kafka-connection-string}
        resources:
          cpu: 1
          memory: 2Gi
    scale:
      minReplicas: 1
      maxReplicas: 3
